import subprocess

# Port range variable
port_range = "1-1024"

# Parse port range
start, end = map(int, port_range.split('-'))

# Read IPs from file
with open('ip.txt', 'r') as file:
    lines = file.readlines()

# Loop through each line
for line in lines:
    parts = line.strip().split()
    if len(parts) >= 2:
        ip = parts[1]
        # Loop through each port
        for port in range(start, end + 1):
            command = f"nmap -p {port} {ip}"
            result = subprocess.run(command, shell=True, capture_output=True, text=True)
            output = result.stdout
            for out_line in output.splitlines():
                if '/tcp' in out_line:
                    out_parts = out_line.split()
                    if len(out_parts) >= 2:
                        state = out_parts[1]
                        print(f"{ip} port {port} {state}")
