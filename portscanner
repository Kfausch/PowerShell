import nmap

# Read IP addresses from file
with open('ip.txt', 'r') as file:
    ips = [line.strip() for line in file if line.strip()]

# Port range as variable (change this to adjust)
port_range = '1-1024'

# Create scanner
nm = nmap.PortScanner()

# Loop through IPs
for ip in ips:
    # Scan the IP with port range
    nm.scan(ip, port_range)
    
    # Loop through scanned ports and print states
    if 'tcp' in nm[ip]:
        for port in nm[ip]['tcp']:
            state = nm[ip]['tcp'][port]['state']
            print(f"IP {ip} - port {port} - state {state}")
